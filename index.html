<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portal Estiba VLC - Puerto de Valencia</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Header fijo -->
  <header id="app-header" class="header-main">
    <div class="header-content">
      <div class="header-logo">
        <img src="https://i.imgur.com/7F1BWQ2.jpeg" alt="Puerto Valencia" class="logo-img">
        <div class="logo-text">
          <h1>Portal Estiba VLC</h1>
          <p>Puerto de Valencia</p>
        </div>
      </div>
      <div class="header-actions">
        <button id="menuBtn" class="menu-btn md:hidden">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
        <div id="user-info" class="user-info hidden">
          <span id="user-chapa" class="user-chapa"></span>
          <button id="change-password-btn" class="settings-btn" title="Cambiar Contraseña">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
            </svg>
          </button>
          <button id="logoutBtn" class="logout-btn">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1H3zm11 4.414l-4.293 4.293a1 1 0 01-1.414 0L4 7.414 5.414 6l3.293 3.293L13.586 5 15 6.414z" clip-rule="evenodd" />
            </svg>
            Salir
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Sidebar navegación -->
  <aside id="sidebar" class="sidebar">
    <nav class="sidebar-nav">
      <button class="nav-link" data-page="dashboard">
        <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
        </svg>
        Dashboard
      </button>
      <button class="nav-link" data-page="contratacion">
        <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
        </svg>
        Mi Contratación
      </button>
      <button class="nav-link" data-page="jornales">
        <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
        </svg>
        Mis Jornales
      </button>
      <button class="nav-link" data-page="puertas">
        <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
        </svg>
        Puertas
      </button>
      <button class="nav-link" data-page="censo">
        <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
        </svg>
        Censo
      </button>
      <button class="nav-link" data-page="enlaces">
        <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
        </svg>
        Enlaces Útiles
      </button>
      <button class="nav-link" data-page="noticias">
        <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />
        </svg>
        Noticias
      </button>
      <button class="nav-link" data-page="foro">
        <svg xmlns="http://www.w3.org/2000/svg" class="nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z" />
        </svg>
        Foro
      </button>
    </nav>
  </aside>

  <!-- Overlay para cerrar sidebar en móvil -->
  <div id="sidebar-overlay" class="sidebar-overlay"></div>

  <!-- Contenido principal -->
  <main id="main-content" class="main-content">

    <!-- PÁGINA DE LOGIN -->
    <section id="page-login" class="page active">
      <div class="login-container">
        <div class="login-card">
          <div class="login-hero">
            <img src="https://i.imgur.com/xcHiyAn.jpeg" alt="Puerto de Valencia">
            <div class="login-hero-overlay">
              <h2>Bienvenido</h2>
              <p>Portal de Estibadores Eventuales</p>
            </div>
          </div>
          <div class="login-form">
            <div class="form-group">
              <label for="chapa-input">Número de Chapa</label>
              <input type="number" id="chapa-input" placeholder="Introduce tu número de chapa" autocomplete="off">
            </div>
            <div class="form-group">
              <label for="password-input">Contraseña</label>
              <input type="password" id="password-input" placeholder="Introduce tu contraseña" autocomplete="current-password">
            </div>
            <p id="login-error" class="error-message">Por favor, verifica tu chapa y contraseña</p>
            <button id="login-btn" class="btn-primary btn-large">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z" clip-rule="evenodd" />
              </svg>
              Acceder al Portal
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- PÁGINA DASHBOARD -->
    <section id="page-dashboard" class="page">
      <div class="page-hero">
        <img src="https://i.imgur.com/bSOecVC.jpeg" alt="Puerto de Valencia">
        <div class="page-hero-content">
          <h2>Portal de Estibadores Eventuales</h2>
          <p>Puerto de Valencia - Información en tiempo real</p>
        </div>
      </div>

      <div class="container">
        <div class="welcome-card">
          <h3 id="welcome-message">Bienvenido al Portal</h3>
          <p>Accede rápidamente a toda tu información laboral</p>
        </div>

        <div class="dashboard-grid">
          <div class="dashboard-card" data-navigate="contratacion">
            <div class="dashboard-card-icon blue">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
              </svg>
            </div>
            <h3>Mi Contratación</h3>
            <p>Consulta tus asignaciones del día</p>
            <img src="https://i.imgur.com/guKCoFy.jpeg" alt="Contenedores">
          </div>

          <div class="dashboard-card" data-navigate="jornales">
            <div class="dashboard-card-icon green">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
              </svg>
            </div>
            <h3>Mis Jornales</h3>
            <p>Seguimiento de jornales por quincena</p>
            <img src="https://i.imgur.com/C3UpaWV.jpeg" alt="Terminal">
          </div>

          <div class="dashboard-card" data-navigate="puertas">
            <div class="dashboard-card-icon orange">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
            </div>
            <h3>Puertas</h3>
            <p>Consulta las puertas del día</p>
            <img src="https://i.imgur.com/gUw97fH.jpeg" alt="Puertas">
          </div>

          <div class="dashboard-card" data-navigate="censo">
            <div class="dashboard-card-icon purple">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
              </svg>
            </div>
            <h3>Censo</h3>
            <p>Consulta el censo de disponibilidad</p>
            <img src="https://i.imgur.com/iHJOi0K.jpeg" alt="Operativa">
          </div>

          <div class="dashboard-card" data-navigate="noticias">
            <div class="dashboard-card-icon red">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />
              </svg>
            </div>
            <h3>Noticias</h3>
            <p>Últimas comunicaciones importantes</p>
            <img src="https://i.imgur.com/7F1BWQ2.jpeg" alt="Noticias">
          </div>

          <div class="dashboard-card" data-navigate="foro">
            <div class="dashboard-card-icon teal">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z" />
              </svg>
            </div>
            <h3>Foro</h3>
            <p>Conecta con otros estibadores</p>
            <img src="https://i.imgur.com/xcHiyAn.jpeg" alt="Foro">
          </div>
        </div>
      </div>
    </section>

    <!-- PÁGINA MI CONTRATACIÓN -->
    <section id="page-contratacion" class="page">
      <div class="page-hero small">
        <img src="https://i.imgur.com/guKCoFy.jpeg" alt="Operativa Terminal">
        <div class="page-hero-content">
          <h2>Mi Contratación</h2>
          <p>Asignaciones del día en tiempo real</p>
        </div>
      </div>
      <div class="container">
        <div id="contratacion-loading" class="loading-state">
          <div class="spinner"></div>
          <p>Cargando asignaciones...</p>
        </div>
        <div id="contratacion-content"></div>
      </div>
    </section>

    <!-- PÁGINA MIS JORNALES -->
    <section id="page-jornales" class="page">
      <div class="page-hero small">
        <img src="https://i.imgur.com/C3UpaWV.jpeg" alt="Puerto Valencia Jornales">
        <div class="page-hero-content">
          <h2>Mis Jornales</h2>
          <p>Seguimiento por quincena</p>
        </div>
      </div>
      <div class="container">
        <div id="jornales-stats" class="stats-grid"></div>
        <div id="jornales-loading" class="loading-state">
          <div class="spinner"></div>
          <p>Cargando jornales...</p>
        </div>
        <div id="jornales-content"></div>
      </div>
    </section>

    <!-- PÁGINA PUERTAS -->
    <section id="page-puertas" class="page">
      <div class="page-hero small">
        <img src="https://i.imgur.com/gUw97fH.jpeg" alt="Puertas Puerto">
        <div class="page-hero-content">
          <h2 id="puertas-titulo">Puertas del Día</h2>
          <p id="puertas-fecha">Información actualizada de puertas</p>
        </div>
      </div>
      <div class="container">
        <div id="puertas-loading" class="loading-state">
          <div class="spinner"></div>
          <p>Cargando puertas...</p>
        </div>
        <div id="puertas-content"></div>
      </div>
    </section>

    <!-- PÁGINA CENSO -->
    <section id="page-censo" class="page">
      <div class="page-hero small">
        <img src="https://i.imgur.com/iHJOi0K.jpeg" alt="Censo">
        <div class="page-hero-content">
          <h2>Censo de Disponibilidad</h2>
          <p>Estado actual de la bolsa de eventuales</p>
        </div>
      </div>
      <div class="container">
        <!-- Leyenda de colores -->
        <div class="censo-legend">
          <div class="censo-legend-item">
            <span class="censo-legend-color green"></span>
            <span>Verde: Disponible</span>
          </div>
          <div class="censo-legend-item">
            <span class="censo-legend-color blue"></span>
            <span>Azul: 3 jornadas</span>
          </div>
          <div class="censo-legend-item">
            <span class="censo-legend-color yellow"></span>
            <span>Amarillo: 2 jornadas</span>
          </div>
          <div class="censo-legend-item">
            <span class="censo-legend-color orange"></span>
            <span>Naranja: 1 jornada</span>
          </div>
          <div class="censo-legend-item">
            <span class="censo-legend-color red"></span>
            <span>Rojo: No disponible</span>
          </div>
        </div>

        <div id="censo-loading" class="loading-state">
          <div class="spinner"></div>
          <p>Cargando censo...</p>
        </div>
        <div id="censo-content"></div>
      </div>
    </section>

    <!-- PÁGINA ENLACES -->
    <section id="page-enlaces" class="page">
      <div class="page-hero small">
        <img src="https://i.imgur.com/7F1BWQ2.jpeg" alt="Enlaces">
        <div class="page-hero-content">
          <h2>Enlaces y Formularios</h2>
          <p>Accesos rápidos a recursos útiles</p>
        </div>
      </div>
      <div class="container">
        <div id="enlaces-content"></div>
      </div>
    </section>

    <!-- PÁGINA NOTICIAS -->
    <section id="page-noticias" class="page">
      <div class="page-hero small">
        <img src="https://i.imgur.com/bSOecVC.jpeg" alt="Noticias">
        <div class="page-hero-content">
          <h2>Noticias y Avisos</h2>
          <p>Comunicaciones importantes</p>
        </div>
      </div>
      <div class="container">
        <div id="noticias-content"></div>
      </div>
    </section>

    <!-- PÁGINA FORO -->
    <section id="page-foro" class="page">
      <div class="page-hero small">
        <img src="https://i.imgur.com/xcHiyAn.jpeg" alt="Foro">
        <div class="page-hero-content">
          <h2>Foro de Compañeros</h2>
          <p>Comunícate con otros estibadores</p>
        </div>
      </div>
      <div class="container foro-container">
        <div id="foro-messages" class="foro-messages"></div>
      </div>

      <!-- Composer fijo en la parte inferior -->
      <div id="foro-composer" class="foro-composer">
        <div class="foro-composer-inner">
          <textarea id="foro-input" placeholder="Escribe tu mensaje..." rows="2"></textarea>
          <button id="foro-send" class="btn-primary">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
              <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" />
            </svg>
            Enviar
          </button>
        </div>
      </div>
    </section>

  </main>

  <!-- Modal para cambiar contraseña -->
  <div id="change-password-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Cambiar Contraseña</h3>
        <button id="close-password-modal" class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="current-password">Contraseña Actual</label>
          <input type="password" id="current-password" placeholder="Introduce tu contraseña actual" autocomplete="current-password">
        </div>
        <div class="form-group">
          <label for="new-password">Nueva Contraseña</label>
          <input type="password" id="new-password" placeholder="Introduce tu nueva contraseña" autocomplete="new-password">
        </div>
        <div class="form-group">
          <label for="confirm-password">Confirmar Nueva Contraseña</label>
          <input type="password" id="confirm-password" placeholder="Confirma tu nueva contraseña" autocomplete="new-password">
        </div>
        <p id="password-change-error" class="error-message"></p>
        <p id="password-change-success" class="success-message"></p>
      </div>
      <div class="modal-footer">
        <button id="cancel-password-change" class="btn-secondary">Cancelar</button>
        <button id="confirm-password-change" class="btn-primary">Cambiar Contraseña</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="sheets.js"></script>
  <script src="app.js"></script>
</body>
</html>
